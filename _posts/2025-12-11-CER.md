---
layout: single
title: "CER(Character Error Rate) 가이드"
categories: [Algorithm]
tags: [CER, Levenshtein, 문자열비교, 텍스트정확도]
---

텍스트 데이터를 다룰 때 **두 문자열이 얼마나 다른지**,  
혹은 **얼마나 정확하게 일치하는지**를 평가해야 하는 경우가 많다.

- AI 모델이 생성한 문장의 품질 측정  
- STT/음성인식 결과 비교  
- 번역문 비교  
- 텍스트 정규화 결과 검증  
- 데이터 변환/전처리 검증  
- 로그 비교 자동화

이런 상황에서 가장 널리 사용되는 지표가 **CER(Character Error Rate)**이다.

이 글에서는 CER의 정의, 수학적 의미, 왜 레벤슈타인 거리로 계산하는지,  
그리고 실제로 어떻게 구현하는지까지 한 번에 정리한다.

---

# 1. CER(Character Error Rate)란 무엇인가?

CER은 **두 문자열 간의 차이를 오류율로 환산한 값**이다.

즉,

> “문자 단위로 얼마나 다른가?”

를 퍼센트로 표현한 지표.

---

## CER 공식

- CER = (삽입 + 삭제 + 대치) / 기준 문자열 길이 × 100

여기서 사용되는 세 오류는 다음과 같다.

| 오류 유형 | 뜻 |
|----------|-------------|
| 삽입(Insertion) | 기준 문자열에 없는 글자가 추가됨 |
| 삭제(Deletion) | 있어야 할 글자가 빠짐 |
| 대치(Substitution) | 글자가 다른 글자로 변경됨 |

따라서 CER이 낮을수록 두 문자열의 유사도가 높다.

---

# 2. CER이 필요한 이유

문자열을 단순히 `===` 비교하면 아래 차이를 측정할 수 없다.

- 한 글자만 잘못되었는지  
- 두 글자가 자리가 바뀌었는지  
- 중간이 삭제되었는지  
- 유사한 단어지만 몇 글자가 변경되었는지  
- 사용자가 입력한 값이 원본과 얼마나 유사한지  

CER은 단순한 동일 여부가 아니라  
**“얼마나 다른지”**를 수학적으로 계산할 수 있다.

---

# 3. CER 계산을 위한 핵심 알고리즘 — Levenshtein Distance

CER을 계산하기 위해서는 두 문자열의 차이를 측정해야 한다.
이때 사용되는 것이 **레벤슈타인 거리(Levenshtein Distance)**이다.
> “한 문자열을 다른 문자열로 만들기 위해 필요한 최소 연산 횟수”
를 계산하는 알고리즘으로, 연산은 다음과 같다:

- 삽입 (Insert)
- 삭제 (Delete)
- 대치 (Substitute)

이 연산을 최소로 할 때의 총 연산 횟수가 바로 "거리"이며,  
이 거리를 기반으로 CER이 계산된다.

---

# 4. Levenshtein Distance는 어떻게 계산되는가?

아래는 간단한 예시:
```ts
A = "APPLE"
B = "APLE"

삭제(Delete) 1회 → 거리 = 1
```
또 다른 예시:
```ts
A = "HELLO"
B = "HALO"

대치 1 + 삭제 1 = 거리 2
```
이 거리(Distance)를 기준 문자열 길이로 나누면 CER이 된다.

---

# 5. CER 구현 (JavaScript/TypeScript)

아래는 내가 실제로 구현한 CER 계산 코드.

```ts
export const levenshtein = (a, b) => {
  const matrix = [];

  for (let i = 0; i <= b.length; i++) matrix[i] = [i];
  for (let j = 0; j <= a.length; j++) matrix[0][j] = j;

  for (let i = 1; i <= b.length; i++) {
    for (let j = 1; j <= a.length; j++) {
      if (b[i - 1] === a[j - 1]) {
        matrix[i][j] = matrix[i - 1][j - 1];
      } else {
        matrix[i][j] = Math.min(
          matrix[i - 1][j] + 1,     // 삭제
          matrix[i][j - 1] + 1,     // 삽입
          matrix[i - 1][j - 1] + 1  // 대치
        );
      }
    }
  }

  return matrix[b.length][a.length];
};
```
이 Distance와 기준 문자열 길이를 이용해 CER 계산:

```ts
const cer = (distance / originalText.length) * 100;
```
# 7. CER의 활용 분야
CER은 OCR뿐 아니라 다음 전반에 사용할 수 있다.
- AI로 생성된 텍스트 품질 비교
- 번역기 결과 비교 (Reference vs Hypothesis)
- 음성인식(STT) 정확도 측정
- 두 문서의 차이를 수치화
- 사용자 입력값의 오타 검출
- 로그 비교 자동화
- 텍스트 유사도 기반의 추천/검색 정확도 평가
- 자연어 모델 챗봇 응답 품질 평가

즉, 텍스트 비교가 필요한 모든 상황에서 CER은 사용할 수 있는 범용 메트릭이다.