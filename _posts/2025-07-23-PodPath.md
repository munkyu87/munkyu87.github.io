---
layout: single
title: "rbenv + cocoapods 경로 문제 해결 가이드"
categories: 버그수정
tags: [rbenv, cocoapods, PATH, pod]
toc: true
toc_sticky: true
author_profile: true
---

# 📌 개요

iOS 개발을 하다 보면, `pod` 명령어가 실행되지 않거나, 예상과 다른 버전의 `pod`가 실행되는 경우가 있습니다.  
주로 **rbenv**로 ruby를 설치한 경우, 시스템의 ruby와 충돌하거나 PATH가 꼬여서 발생합니다.

---

# 📌 에러 예시

```bash
$ pod install
-bash: /usr/local/bin/pod: No such file or directory
```

또는

```bash
$ which pod
/usr/local/bin/pod
```

인데 버전이 달라서 빌드가 깨지는 경우.

---

# 📌 원인

- macOS에는 기본 ruby가 설치되어 있고, /usr/bin/ruby를 사용합니다.
- rbenv나 rvm으로 ruby를 설치하면 $HOME/.rbenv/shims에 ruby와 gem, pod 등의 shim이 생깁니다.
- 하지만 PATH가 올바르게 설정되지 않거나, 캐시가 남아있으면 시스템의 pod가 실행됩니다.

---

# 📌 해결 방법

### 1️⃣ 현재 pod 경로 확인

```bash
which pod
```

ex)

```bash
/usr/local/bin/pod  → 시스템에 설치된 pod
/Users/username/.rbenv/shims/pod → rbenv의 pod
```

### 2️⃣ rbenv PATH를 최우선으로 설정

.zshrc 또는 .bash_profile에 다음을 추가:

```bash
export PATH="$HOME/.rbenv/shims:$PATH"
```

변경 적용:

```bash
source ~/.zshrc
```

### 3️⃣ rbenv 초기화

```bash
eval "$(rbenv init -)"
```

또는 .zshrc에 추가하고 적용:

```bash
echo 'eval "$(rbenv init -)"' >> ~/.zshrc
source ~/.zshrc
```

### 4️⃣ rbenv에서 ruby 버전 설정

```bash
rbenv global 3.1.4   # 원하는 버전
rbenv rehash
```

### 5️⃣ cocoapods 재설치

rbenv의 ruby에 gem으로 설치:

```bash
gem install cocoapods
rbenv rehash
```

### 6️⃣ 캐시 초기화

터미널에서 shim 캐시를 지우기:

```bash
hash -r
```

### 7️⃣ 정상 동작 확인

```bash
which pod
pod --version
```

출력 예:

```bash
/Users/username/.rbenv/shims/pod
1.14.2
```

---

# 📌 요약 명령어

```bash
export PATH="$HOME/.rbenv/shims:$PATH"
eval "$(rbenv init -)"
rbenv global <ruby-version>
rbenv rehash
gem install cocoapods
rbenv rehash
hash -r
which pod
pod --version
```
